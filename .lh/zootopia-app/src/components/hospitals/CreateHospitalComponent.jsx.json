{
    "sourceFile": "zootopia-app/src/components/hospitals/CreateHospitalComponent.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1754783423012,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1754783423011,
            "name": "Commit-0",
            "content": "import React, { useRef, useState } from \"react\";\r\n\r\nconst dummySpecialtyList = [\r\n  { specialtyId: 1, category: \"내과\" },\r\n  { specialtyId: 2, category: \"외과\" },\r\n  { specialtyId: 3, category: \"치과\" },\r\n];\r\nconst dummyAnimalList = [\r\n  { animalId: 101, species: \"강아지\" },\r\n  { animalId: 102, species: \"고양이\" },\r\n  { animalId: 103, species: \"토끼\" },\r\n];\r\n\r\nconst IS_ADMIN = true;\r\n\r\nconst HospitalForm = () => {\r\n  const [hospitalForm, setHospitalForm] = useState({\r\n    hospitalId: null,\r\n    name: \"\",\r\n    address: \"\",\r\n    homepage: \"\",\r\n    phone: \"\",\r\n    email: \"\",\r\n    hospIntroduce: \"\",\r\n    specialtyIds: [],\r\n    animalIds: [],\r\n  });\r\n\r\n  const [thumbnailFile, setThumbnailFile] = useState(null);\r\n  const [previewUrl, setPreviewUrl] = useState(\"/img/default-thumbnail.png\");\r\n  const fileInputRef = useRef(null);\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setHospitalForm((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const handleSpecialtyChange = (specId) => {\r\n    setHospitalForm((prev) => {\r\n      const list = prev.specialtyIds.includes(specId)\r\n        ? prev.specialtyIds.filter((id) => id !== specId)\r\n        : [...prev.specialtyIds, specId];\r\n      return { ...prev, specialtyIds: list };\r\n    });\r\n  };\r\n\r\n  const handleAnimalChange = (animalId) => {\r\n    setHospitalForm((prev) => {\r\n      const list = prev.animalIds.includes(animalId)\r\n        ? prev.animalIds.filter((id) => id !== animalId)\r\n        : [...prev.animalIds, animalId];\r\n      return { ...prev, animalIds: list };\r\n    });\r\n  };\r\n\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setThumbnailFile(file);\r\n      const reader = new FileReader();\r\n      reader.onload = () => setPreviewUrl(reader.result);\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const handleImageClick = () => {\r\n    fileInputRef.current.click();\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const dataToSend = {\r\n      ...hospitalForm,\r\n      thumbnailImageFile: thumbnailFile ? thumbnailFile.name : null,\r\n    };\r\n    alert(JSON.stringify(dataToSend, null, 2));\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    if (window.confirm(\"정말로 이 병원을 삭제하시겠습니까?\")) {\r\n      alert(\"병원 삭제 처리(실제 환경에서는 서버로 요청 필요)\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"tw:min-h-screen tw:flex tw:flex-col tw:items-center tw:bg-cover tw:bg-center tw:relative tw:px-4 sm:tw:px-6 lg:tw:px-8\"\r\n      style={{\r\n        backgroundImage: \"url('/img/background/funeral_background1.jpg')\",\r\n      }}\r\n    >\r\n      <div className=\"tw:absolute tw:inset-0 tw:bg-[rgba(255,213,204,0)] tw:-z-10\"></div>\r\n\r\n      {/* 상단 로고 */}\r\n      <div className=\"tw:mt-6 tw:mb-4 tw:w-full tw:max-w-5xl\">\r\n        <div className=\"tw:w-full tw:h-20 sm:tw:h-28 md:tw:h-32 tw:rounded-md tw:overflow-hidden tw:shadow-lg\">\r\n          <img\r\n            src=\"/img/hosp_logo.png\"\r\n            alt=\"병원 아이콘\"\r\n            className=\"tw:w-full tw:h-full tw:object-cover\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* 메인 컨텐츠 */}\r\n      <div className=\"tw:flex tw:flex-col lg:tw:flex-row tw:items-center tw:w-full tw:max-w-5xl tw:gap-5\">\r\n        {/* 이미지 업로드 */}\r\n        <form\r\n          id=\"imageForm\"\r\n          encType=\"multipart/form-data\"\r\n          className=\"tw:bg-gray-50 tw:p-4 sm:tw:p-6 tw:rounded-xl tw:shadow tw:w-full sm:tw:w-[150px] tw:lg:w-[400px] tw:flex-shrink-0\"\r\n          onSubmit={(e) => e.preventDefault()}\r\n        >\r\n          <div\r\n            className=\"tw:rounded tw:overflow-hidden tw:cursor-pointer tw:border tw:border-gray-200\"\r\n            onClick={handleImageClick}\r\n          >\r\n            <img\r\n              id=\"preview\"\r\n              src={previewUrl}\r\n              alt=\"미리보기\"\r\n              className=\"lg:tw:w-64 tw:h-40 sm:tw:h-48 tw:object-cover\"\r\n            />\r\n          </div>\r\n          <input\r\n            type=\"file\"\r\n            ref={fileInputRef}\r\n            name=\"thumbnailImageFile\"\r\n            accept=\"image/*\"\r\n            className=\"tw:hidden\"\r\n            onChange={handleImageChange}\r\n          />\r\n        </form>\r\n\r\n        {/* 병원 기본 정보 */}\r\n        <form\r\n          id=\"generalDataForm\"\r\n          onSubmit={handleSubmit}\r\n          className=\"tw:flex-1 tw:bg-[rgba(255,135,135,0.53)] tw:p-4 sm:tw:p-6 tw:rounded-xl tw:shadow tw:w-full\"\r\n        >\r\n          <div className=\"tw:flex tw:flex-col tw:gap-4\">\r\n            {[\r\n              { id: \"name\", label: \"병원 이름\", type: \"text\", placeholder: \"병원 이름을 작성하세요\", required: true },\r\n              { id: \"address\", label: \"병원 주소\", type: \"text\", placeholder: \"주소를 입력해 주세요\", required: true },\r\n              { id: \"homepage\", label: \"홈페이지\", type: \"url\", placeholder: \"홈페이지 주소를 입력해 주세요\" },\r\n              { id: \"phone\", label: \"대표번호\", type: \"tel\", placeholder: \"병원 전화번호를 입력하세요\", required: true },\r\n              { id: \"email\", label: \"이메일\", type: \"email\", placeholder: \"이메일 주소를 입력하세요\" },\r\n            ].map((field) => (\r\n              <div key={field.id} className=\"tw:flex tw:flex-col tw:gap-1\">\r\n                <label htmlFor={field.id} className=\"tw:font-semibold tw:text-sm\">\r\n                  {field.label}\r\n                </label>\r\n                <input\r\n                  type={field.type}\r\n                  id={field.id}\r\n                  name={field.id}\r\n                  value={hospitalForm[field.id]}\r\n                  onChange={handleInputChange}\r\n                  placeholder={field.placeholder}\r\n                  required={field.required}\r\n                  className=\"tw:border tw:border-gray-300 tw:rounded tw:px-3 tw:py-2 tw:w-full\"\r\n                />\r\n              </div>\r\n            ))}\r\n\r\n            {/* 소개 */}\r\n            <div className=\"tw:flex tw:flex-col tw:gap-1\">\r\n              <label htmlFor=\"hospIntroduce\" className=\"tw:font-semibold tw:text-sm\">\r\n                병원 소개\r\n              </label>\r\n              <textarea\r\n                id=\"hospIntroduce\"\r\n                name=\"hospIntroduce\"\r\n                value={hospitalForm.hospIntroduce}\r\n                onChange={handleInputChange}\r\n                placeholder=\"간단한 소개글을 작성해 주세요\"\r\n                required\r\n                rows={4}\r\n                className=\"tw:border tw:border-gray-300 tw:rounded tw:px-3 tw:py-2 tw:w-full tw:resize-none\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      {/* 진료 과목 & 동물 */}\r\n      <div className=\"tw:mt-5 tw:w-full tw:max-w-5xl tw:bg-[rgba(255,163,143,1)] tw:p-4 sm:tw:p-6 tw:rounded-xl tw:shadow\">\r\n        <div className=\"tw:flex tw:flex-col sm:tw:flex-row tw:gap-6\">\r\n          {/* 진료과목 */}\r\n          <div className=\"tw:flex-1\">\r\n            <label className=\"tw:font-semibold tw:text-sm\">진료 과목</label>\r\n            <div className=\"tw:flex tw:flex-wrap tw:gap-3 mt-2\">\r\n              {dummySpecialtyList.map((spec) => (\r\n                <label key={spec.specialtyId} className=\"tw:flex tw:items-center tw:gap-1\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={hospitalForm.specialtyIds.includes(spec.specialtyId)}\r\n                    onChange={() => handleSpecialtyChange(spec.specialtyId)}\r\n                    className=\"tw:accent-pink-500 ds-checkbox ds-checkbox-primary\"\r\n                  />\r\n                  <span>{spec.category}</span>\r\n                </label>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* 진료동물 */}\r\n          <div className=\"tw:flex-1\">\r\n            <label className=\"tw:font-semibold tw:text-sm\">진료 가능 동물</label>\r\n            <div className=\"tw:flex tw:flex-wrap tw:gap-3 mt-2\">\r\n              {dummyAnimalList.map((animal) => (\r\n                <label key={animal.animalId} className=\"tw:flex tw:items-center tw:gap-1\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={hospitalForm.animalIds.includes(animal.animalId)}\r\n                    onChange={() => handleAnimalChange(animal.animalId)}\r\n                    className=\"tw:accent-pink-500\"\r\n                  />\r\n                  <span>{animal.species}</span>\r\n                </label>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 버튼 영역 */}\r\n      <div className=\"tw:flex tw:flex-col sm:tw:flex-row tw:gap-3 tw:mt-4 tw:w-full tw:max-w-5xl\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"tw:flex-1 sm:tw:flex-none tw:px-4 tw:py-2 tw:rounded tw:bg-gray-400 tw:text-white hover:tw:bg-gray-500\"\r\n          onClick={() => window.history.back()}\r\n        >\r\n          취소\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          id=\"submitAllBtn\"\r\n          className=\"tw:flex-1 sm:tw:flex-none tw:px-4 tw:py-2 tw:rounded tw:bg-pink-500 tw:text-white hover:tw:bg-pink-600\"\r\n          onClick={handleSubmit}\r\n        >\r\n          {hospitalForm.hospitalId ? \"수정\" : \"등록\"}\r\n        </button>\r\n        {IS_ADMIN && hospitalForm.hospitalId && (\r\n          <button\r\n            type=\"button\"\r\n            id=\"deleteBtn\"\r\n            className=\"tw:flex-1 sm:tw:flex-none tw:px-4 tw:py-2 tw:rounded tw:bg-red-500 tw:text-white hover:tw:bg-red-600\"\r\n            onClick={handleDelete}\r\n          >\r\n            삭제\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HospitalForm;\r\n"
        }
    ]
}